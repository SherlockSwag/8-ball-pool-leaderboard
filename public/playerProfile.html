<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Player Profile - Pool House</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css"> 
</head>
<body class="bg-gradient-to-br from-gray-900 to-gray-800 font-inter flex flex-col items-center min-h-screen px-4 text-gray-100">
    <header class="w-full max-w-5xl bg-gradient-to-r from-blue-700 to-purple-800 shadow-xl py-4 text-white text-center rounded-b-xl mb-8">
        <h1 class="text-4xl lg:text-5xl font-extrabold tracking-tight">Player Profile</h1>
        <nav class="w-full max-w-5xl mx-auto mt-4 px-4">
            <ul class="flex flex-wrap justify-center items-center gap-4 sm:gap-6">
                <li>
                    <a href="index.html" class="text-white hover:text-blue-200 font-medium transition duration-150 ease-in-out text-base sm:text-lg px-3 py-1 rounded-md bg-transparent hover:bg-white hover:bg-opacity-10">
                        Leaderboard
                    </a>
                </li>
                <li>
                    <a href="playerList.html" class="text-white hover:text-blue-200 font-medium transition duration-150 ease-in-out text-base sm:text-lg px-3 py-1 rounded-md bg-transparent hover:bg-white hover:bg-opacity-10">
                        Player List
                    </a>
                </li>
                <li>
                    <a href="calculators.html" class="text-white hover:text-blue-200 font-medium transition duration-150 ease-in-out text-base sm:text-lg px-3 py-1 rounded-md bg-transparent hover:bg-white hover:bg-opacity-10">
                        Calculator
                    </a>
                </li>
                <li>
                    <a href="allMatches.html" class="text-white hover:text-blue-200 font-medium transition duration-150 ease-in-out text-base sm:text-lg px-3 py-1 rounded-md bg-transparent hover:bg-white hover:bg-opacity-10">
                        Match History
                    </a>
                </li>
                <li>
                    <a href="#" class="text-white hover:text-blue-200 font-medium transition duration-150 ease-in-out text-base sm:text-lg px-3 py-1 rounded-md bg-transparent hover:bg-white hover:bg-opacity-10">
                        Empty
                        </a>
                </li>
            </ul>
        </nav>
    </header>

    <main class="w-full max-w-5xl mt-8 mb-8">
        <div class="bg-gray-800 p-8 rounded-xl shadow-2xl border border-gray-700 w-full">

            <div id="profileErrorMessage" class="mt-4 p-3 rounded-lg text-sm hidden"></div>

            <section class="flex flex-col sm:flex-row items-center sm:items-start gap-6 mb-8 pb-8 border-b border-gray-700">
                <div class="flex-shrink-0">
                    <div class="w-24 h-24 rounded-full bg-blue-600 flex items-center justify-center text-3xl font-bold text-white mb-4 overflow-hidden shadow-lg">
                        <img id="playerAvatar" src="https://placehold.co/96x96/4299E1/FFFFFF?text=?" 
                             alt="Player Avatar" 
                             class="w-full h-full object-cover">
                    </div>
                </div>
                <div class="flex-grow text-center sm:text-left">
                    <h1 id="profilePlayerName" class="text-4xl font-bold text-blue-300 mb-2">Loading Player...</h1>
                    <p id="playerDescription" class="text-gray-300 text-lg italic mt-2">No description available.</p>
                </div>
                <div class="flex-shrink-0 sm:self-end mt-4 sm:mt-0">
                    <button id="editProfileBtn" class="px-4 py-2 bg-yellow-600 hover:bg-yellow-700 text-white font-semibold rounded-lg transition-colors text-base">
                        Edit Profile
                    </button>
                </div>
                
            </section>
            <div id="editProfileModal" class="modal">
                <div class="modal-content">
                    <span class="close-button" id="closeEditModalBtn">&times;</span>
                    <h2 class="modal-title">Edit Player Profile</h2>
                    <form id="editProfileForm">
                        <div class="form-group">
                            <label for="editDisplayName" class="form-label">Display Name:</label>
                            <input type="text" id="editDisplayName" class="form-input" placeholder="Enter new display name">
                        </div>
                        <div class="form-group">
                            <label for="editDescription" class="form-label">Description:</label>
                            <textarea id="editDescription" rows="4" class="form-textarea" placeholder="Tell us about yourself..."></textarea>
                        </div>

                        <div class="avatar-section">
                            <label class="avatar-section-title">Player Avatar</label>
                            
                            <label class="avatar-preview-label">Current Displayed Avatar:</label>
                            <img id="currentAvatarPreview" src="" alt="Current Avatar" class="current-avatar-preview">
                            
                            <div class="avatar-option-card">
                                <label class="avatar-option-title">Generate New DiceBear Pixel Art Avatar</label>
                                <button type="button" id="generateRandomAvatarBtn" class="btn btn-purple">
                                    Generate Random DiceBear
                                </button>
                            </div>
                        </div>
                        <div class="avatar-option-card">
                            <label class="avatar-option-title">Upload Custom Avatar (Image file)</label>
                            <label for="editAvatarFile" class="form-label">Select File (optional):</label>
                            <input type="file" id="editAvatarFile" accept="image/*" class="custom-file-input">
                            <p class="text-xs text-gray-400 mt-2">Uploading a new file will override the DiceBear avatar.</p>
                        </div>
                        
                        <div id="editProfileStatus" class="status-message hidden"></div>
                        
                        <div class="flex-end-gap-3">
                            <button type="button" id="cancelEditBtn" class="btn btn-gray">
                                Cancel
                            </button>
                            <button type="submit" class="btn btn-blue">
                                Save Changes
                            </button>
                        </div>
                    </form>
                </div>
            </div>

            <section class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <div class="bg-gray-700 p-6 rounded-lg shadow-inner border border-gray-600">
                    <h2 class="text-xl font-semibold text-blue-200 mb-4 border-b border-gray-600 pb-2">Overall Statistics</h2>
                    <div class="space-y-3 text-base">
                        <p class="flex items-center"><span class="mr-2 text-blue-400">üìä</span> <strong class="font-semibold text-gray-200">Games Played:</strong> <span id="totalGamesPlayed" class="ml-auto text-gray-50">N/A</span></p>
                        <p class="flex items-center"><span class="mr-2 text-yellow-400">üèÜ</span> <strong class="font-semibold text-gray-200">Total Wins/Losses:</strong> <span id="overallWinsLosses" class="ml-auto text-gray-50">N/A</span></p>
                        <p class="flex items-center"><span class="mr-2 text-purple-400">üìà</span> <strong class="font-semibold text-gray-200">Overall Win Rate:</strong> <span id="overallWinRate" class="ml-auto text-gray-50">N/A</span></p>
                    </div>
                </div>

                <div class="bg-gray-700 p-6 rounded-lg shadow-inner border border-gray-600">
                    <h2 class="text-xl font-semibold text-red-200 mb-4 border-b border-gray-600 pb-2">Streaks</h2>
                    <div class="space-y-3 text-base">
                        <p class="flex items-center"><span class="mr-2 text-orange-400">üî•</span> <strong class="font-semibold text-gray-200">Longest Win Streak:</strong> <span id="longestWinStreak" class="ml-auto text-gray-50">N/A</span></p>
                        <p class="flex items-center"><span class="mr-2 text-blue-400">ü•∂</span> <strong class="font-semibold text-gray-200">Longest Losing Streak:</strong> <span id="longestLosingStreak" class="ml-auto text-gray-50">N/A</span></p>
                        <p class="flex items-center"><span class="mr-2 text-purple-400">‚ö°</span> <strong class="font-semibold text-gray-200">Current Streak:</strong> <span id="currentStreak" class="ml-auto text-gray-50">N/A</span></p>
                    </div>
                </div>

                <div class="bg-gray-700 p-6 rounded-lg shadow-inner border border-gray-600">
                    <h2 class="text-xl font-semibold text-green-200 mb-4 border-b border-gray-600 pb-2">1v1 Matches</h2>
                    <div class="space-y-3 text-base">
                        <p class="flex items-center"><span class="mr-2 text-green-400">‚öîÔ∏è</span> <strong class="font-semibold text-gray-200">Games Played:</strong> <span id="games1v1" class="ml-auto text-gray-50">N/A</span></p>
                        <p class="flex items-center"><span class="mr-2 text-green-400">‚úÖ</span> <strong class="font-semibold text-gray-200">Wins/Losses:</strong> <span id="winsLosses1v1" class="ml-auto text-gray-50">N/A</span></p>
                        <p class="flex items-center"><span class="mr-2 text-green-400">üéØ</span> <strong class="font-semibold text-gray-200">Win Rate:</strong> <span id="winRate1v1" class="ml-auto text-gray-50">N/A</span></p>
                    </div>
                </div>

                <div class="bg-gray-700 p-6 rounded-lg shadow-inner border border-gray-600">
                    <h2 class="text-xl font-semibold text-yellow-200 mb-4 border-b border-gray-600 pb-2">2v2 Matches</h2>
                    <div class="space-y-3 text-base">
                        <p class="flex items-center"><span class="mr-2 text-yellow-400">ü§ù</span> <strong class="font-semibold text-gray-200">Games Played:</strong> <span id="games2v2" class="ml-auto text-gray-50">N/A</span></p>
                        <p class="flex items-center"><span class="mr-2 text-yellow-400">üåü</span> <strong class="font-semibold text-gray-200">Wins/Losses:</strong> <span id="winsLosses2v2" class="ml-auto text-gray-50">N/A</span></p>
                        <p class="flex items-center"><span class="mr-2 text-yellow-400">üèÖ</span> <strong class="font-semibold text-gray-200">Win Rate:</strong> <span id="winRate2v2" class="ml-auto text-gray-50">N/A</span></p>
                    </div>
                </div>

                <div class="bg-gray-700 p-6 rounded-lg shadow-inner border border-gray-600">
                    <h2 class="text-xl font-semibold text-blue-300 mb-4 border-b border-gray-600 pb-2">Balls Potted</h2>
                    <div class="space-y-3 text-base">
                        <p class="flex items-center"><span class="mr-2 text-blue-400">üé±</span> <strong class="font-semibold text-gray-200">Total Balls Potted:</strong> <span id="totalBallsPotted" class="ml-auto text-gray-50">N/A</span></p>
                        <p class="flex items-center"><span class="mr-2 text-blue-400">üéØ</span> <strong class="font-semibold text-gray-200">Average Balls Potted per Game:</strong> <span id="averageBallsPotted" class="ml-auto text-gray-50">N/A</span></p>
                    </div>
                </div>

                <div class="bg-gray-700 p-6 rounded-lg shadow-inner border border-gray-600">
                    <h2 class="text-xl font-semibold text-red-300 mb-4 border-b border-gray-600 pb-2">8 Ball Scratches</h2>
                    <div class="space-y-3 text-base">
                        <p class="flex items-center"><span class="mr-2 text-red-400">üö´</span> <strong class="font-semibold text-gray-200">8 Ball Scratches (By Player):</strong> <span id="player8BallScratches" class="ml-auto text-gray-50">N/A</span></p>
                        <p class="flex items-center"><span class="mr-2 text-red-400">‚úÖ</span> <strong class="font-semibold text-gray-200">Wins by Opponent 8 Ball Scratch:</strong> <span id="winsByOpponent8BallScratch" class="ml-auto text-gray-50">N/A</span></p>
                    </div>
                </div>
            </section>

            <section id="recentMatchesCard" class="bg-gray-800 rounded-lg mb-6 hidden">
                <h3 class="text-xl text-center font-semibold text-blue-500 mb-4 border-b border-gray-700 pb-2">RECENT MATCHES</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <h4 class="text-lg text-center font-medium text-gray-300 mb-3">1v1 Matches</h4>
                        <div class="overflow-x-auto">
                            <table class="min-w-full bg-gray-700 rounded-lg overflow-hidden">
                                <thead>
                                    <tr class="bg-gray-600 text-gray-300 text-left text-sm">
                                        <th class="py-2 px-3 font-semibold">Date</th>
                                        <th class="py-2 px-3 font-semibold">Opponent</th>
                                        <th class="py-2 px-3 font-semibold text-center">Result</th>
                                    </tr>
                                </thead>
                                <tbody id="recent1v1MatchesTableBody">
                                    <tr><td colspan="4" class="py-3 px-4 text-center text-gray-400">No 1v1 recent matches.</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>

                    <div>
                        <h4 class="text-lg text-center font-medium text-gray-300 mb-3">2v2 Matches</h4>
                        <div class="overflow-x-auto">
                            <table class="min-w-full bg-gray-700 rounded-lg overflow-hidden">
                                <thead>
                                    <tr class="bg-gray-600 text-gray-300 text-left text-sm">
                                        <th class="py-2 px-3 font-semibold">Date</th>
                                        <th class="py-2 px-3 font-semibold">Teammate(s) & Opponent(s)</th>
                                        <th class="py-2 px-3 font-semibold text-center">Result</th>
                                    </tr>
                                </thead>
                                <tbody id="recent2v2MatchesTableBody">
                                    <tr><td colspan="4" class="py-3 px-4 text-center text-gray-400">No 2v2 recent matches.</td></tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </div>
                
                <div class="text-center mt-6">
                    <button id="viewAllMatchHistoryBtn" class="px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-semibold rounded-lg transition-colors text-lg">
                        View All Match History
                    </button>
                </div>
            </section>

            <section id="rivalriesCard" class="mb-8"> 
                <h2 class="text-xl text-center font-semibold text-orange-400 mb-4 border-b border-gray-700 pb-2">RIVALRIES</h2>
                <div class="overflow-x-auto rounded-lg border border-gray-700">
                    <table class="min-w-full bg-gray-800 rounded-lg overflow-hidden">
                        <thead class="bg-gray-600">
                            <tr>
                                <th class="py-2 px-4 text-left text-sm font-semibold text-gray-200">Opponent</th>
                                <th class="py-2 px-4 text-center text-sm font-semibold text-gray-200">Win/Loss Bar</th>
                                <th class="py-2 px-4 text-center text-sm font-semibold text-gray-200">Wins</th>
                                <th class="py-2 px-4 text-center text-sm font-semibold text-gray-200">Losses</th>
                                <th class="py-2 px-4 text-center text-sm font-semibold text-gray-200">Win Rate %</th>
                                <th class="py-2 px-4 text-center text-sm font-semibold text-gray-200">Current Streak</th> </tr>
                        </thead>
                        <tbody id="rivalriesTableBody" class="text-gray-100">
                            </tbody>
                    </table>
                </div>
                <p id="noRivalriesMessage" class="py-3 px-4 text-center text-sm text-gray-400 hidden">No rivalries to display yet.</p>
            </section>

            <section id="partnershipsCard" class="mb-8">
                <h2 class="text-xl text-center font-semibold text-purple-500 mb-4 border-b border-gray-700 pb-2">PARTNERSHIPS</h2>
                <div class="overflow-x-auto rounded-lg border border-gray-700">
                    <table class="min-w-full bg-gray-800 rounded-lg overflow-hidden">
                        <thead class="bg-gray-600">
                            <tr>
                                <th class="py-2 px-4 text-left text-sm font-semibold text-gray-200">Teammate</th>
                                <th class="py-2 px-4 text-center text-sm font-semibold text-gray-200">Wins/Losses</th>
                                <th class="py-2 px-4 text-center text-sm font-semibold text-gray-200">Wins</th>
                                <th class="py-2 px-4 text-center text-sm font-semibold text-gray-200">Losses</th>
                                <th class="py-2 px-4 text-center text-sm font-semibold text-gray-200">Win Rate %</th>
                                <th class="py-2 px-4 text-center text-sm font-semibold text-gray-200">Current Streak</th>
                            </tr>
                        </thead>
                        <tbody id="partnershipsTableBody" class="text-gray-100">
                            </tbody>
                    </table>
                </div>
                <p id="noPartnershipsMessage" class="py-3 px-4 text-center text-sm text-gray-400 hidden">No partnerships found yet.</p>
            </section>
        </div>
    </main>

    <script type="module" src="js/playerProfile.js"></script>
</body>
</html>